<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>No More Monad</title>
        <link type="text/css" rel="stylesheet" href="assets/css/show.css" />
        <link type="text/css" rel="stylesheet" href="assets/css/prettify.css" />
        <script type="text/javascript" src="assets/js/jquery.min.js"></script>
        <script type="text/javascript" src="assets/js/show.js"></script>
        <script type="text/javascript" src="assets/js/prettify/prettify.js"></script>
        <script type="text/javascript" src="assets/js/prettify/lang-apollo.js"></script><script type="text/javascript" src="assets/js/prettify/lang-css.js"></script><script type="text/javascript" src="assets/js/prettify/lang-hs.js"></script><script type="text/javascript" src="assets/js/prettify/lang-lisp.js"></script><script type="text/javascript" src="assets/js/prettify/lang-lua.js"></script><script type="text/javascript" src="assets/js/prettify/lang-ml.js"></script><script type="text/javascript" src="assets/js/prettify/lang-proto.js"></script><script type="text/javascript" src="assets/js/prettify/lang-scala.js"></script><script type="text/javascript" src="assets/js/prettify/lang-sql.js"></script><script type="text/javascript" src="assets/js/prettify/lang-sql.js"></script><script type="text/javascript" src="assets/js/prettify/lang-vb.js"></script><script type="text/javascript" src="assets/js/prettify/lang-vhdl.js"></script><script type="text/javascript" src="assets/js/prettify/lang-wiki.js"></script><script type="text/javascript" src="assets/js/prettify/lang-yaml.js"></script>
      <script type="text/javascript"><!--
        window.onload=function() { prettyPrint(); };
      --></script>
      </head>
      <body>
        <div id="slides">
          <div id="reel">
            <div class="content" id="slide-0">
       <div class="container"><h1 id="%E3%83%A2%E3%83%8A%E3%83%89%E3%81%AA%E3%82%93%E3%81%A6%E3%81%84%E3%82%89%E3%81%AA%E3%81%84%21">モナドなんていらない!</h1><p><a  href="https://twitter.com/halcat0x15a">@halcat0x15a</a>
</p></div>
      </div><div class="content" id="slide-1">
       <div class="container"><p>Clojureには(重要)モナドがいらない
</p><ul><li>モナドの為の制御構造が存在しない
</li><li>標準ライブラリはモナドを意識していない
</li></ul></div>
      </div><div class="content" id="slide-2">
       <div class="container"><p>じゃあどうやってプログラミングすればいいんだ？(重症なモナド脳)
</p></div>
      </div><div class="content" id="slide-3">
       <div class="container"><h1 id="%E3%83%A2%E3%83%8A%E3%83%89%E3%81%A8%E3%81%84%E3%81%88%E3%81%B0">モナドといえば</h1><ul><li>手続き型的な記述
</li><li>継続を扱える
</li><li>コンテキストを持つ
</li></ul><p>これをClojureでどうやる？
</p></div>
      </div><div class="content" id="slide-4">
       <div class="container"><h1 id="Threading+Macro">Threading Macro</h1><pre><code class="prettyprint lang-clojure">(-&gt;&gt; (read) (str &quot;Hello, &quot;) prn)
</code></pre><ul><li>括弧が減る
</li><li>ネストしない
</li><li>読み易い
</li><li>いくつか種類がある
</li></ul></div>
      </div><div class="content" id="slide-5">
       <div class="container"><h1 id="%E7%B6%99%E7%B6%9A%E3%81%AE%E7%A0%B4%E6%A3%84">継続の破棄</h1><p>計算の途中でnilが返ったらその後の計算を破棄したい
</p><pre><code class="prettyprint lang-clojure">(-&gt;
  {:foo 1}
  (get :bar) ; nil
  inc)       ; NPE!
</code></pre><p>こんなときはsome-&gt;やsome-&gt;&gt;を使う
</p><pre><code class="prettyprint lang-clojure">(some-&gt;
  {:foo 1}
  (get :bar)
  inc)       ; nil
</code></pre></div>
      </div><div class="content" id="slide-6">
       <div class="container"><p>しかし、nilには情報を付与できない
</p><p>例外を使ってex-infoを投げるのが無難
</p><pre><code class="prettyprint lang-clojure">(defn get' [m k]
  (if-let [v (get m k)]
    v
    (throw (ex-info (str &quot;key not found: &quot; k) {:key k}))))

(try
  (-&gt; {:foo 1} (get' :bar) inc)
  (catch clojure.lang.ExceptionInfo e
    (-&gt; e ex-data :key)))
</code></pre></div>
      </div><div class="content" id="slide-7">
       <div class="container"><h1 id="%E5%88%86%E5%B2%90">分岐</h1><p>手続きを破棄するだけでなく、選択をすることも可能
</p><pre><code class="prettyprint lang-clojure">(defn fizzbuzz [n] 
  (or
    (cond-&gt; nil
      (zero? (mod n 3)) (str &quot;Fizz&quot;)
      (zero? (mod n 5)) (str &quot;Buzz&quot;))
    n))

(map fizzbuzz (range 1 16))
</code></pre></div>
      </div><div class="content" id="slide-8">
       <div class="container"><h1 id="%E9%9B%A3%E3%81%97%E3%81%84%E3%81%93%E3%81%A8">難しいこと</h1><ul><li><p>計算値の束縛
</p><ul><li>多値を返す
</li><li>関数をうまく分割する
</li></ul></li><li><p>暗黙の状態
</p><ul><li>マクロを使う
</li></ul></li></ul></div>
      </div><div class="content" id="slide-9">
       <div class="container"><p>複雑な計算の組み立てにはThreading Macroを!
</p></div>
      </div>
          </div>
        </div>
        
      </body>
    </html>