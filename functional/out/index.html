<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>functional programming</title>
        <link type="text/css" rel="stylesheet" href="assets/css/show.css" />
        <link type="text/css" rel="stylesheet" href="assets/css/prettify.css" />
        <script type="text/javascript" src="assets/js/jquery.min.js"></script>
        <script type="text/javascript" src="assets/js/show.js"></script>
        <script type="text/javascript" src="assets/js/prettify/prettify.js"></script>
        <script type="text/javascript" src="assets/js/prettify/lang-apollo.js"></script><script type="text/javascript" src="assets/js/prettify/lang-css.js"></script><script type="text/javascript" src="assets/js/prettify/lang-hs.js"></script><script type="text/javascript" src="assets/js/prettify/lang-lisp.js"></script><script type="text/javascript" src="assets/js/prettify/lang-lua.js"></script><script type="text/javascript" src="assets/js/prettify/lang-ml.js"></script><script type="text/javascript" src="assets/js/prettify/lang-proto.js"></script><script type="text/javascript" src="assets/js/prettify/lang-scala.js"></script><script type="text/javascript" src="assets/js/prettify/lang-sql.js"></script><script type="text/javascript" src="assets/js/prettify/lang-sql.js"></script><script type="text/javascript" src="assets/js/prettify/lang-vb.js"></script><script type="text/javascript" src="assets/js/prettify/lang-vhdl.js"></script><script type="text/javascript" src="assets/js/prettify/lang-wiki.js"></script><script type="text/javascript" src="assets/js/prettify/lang-yaml.js"></script>
      <script type="text/javascript"><!--
        window.onload=function() { prettyPrint(); };
      --></script>
      </head>
      <body>
        <div id="slides">
          <div id="reel">
            <div class="content" id="slide-0">
       <div class="container"><h1 id="%E7%B4%94%E7%B2%8B%E3%81%AA%E4%B8%96%E7%95%8C%E3%81%A7%E7%94%9F%E3%81%8D%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AB">純粋な世界で生きるために</h1><p><a  href="https://twitter.com/halcat0x15a">halcat0x15a</a>
</p></div>
      </div><div class="content" id="slide-1">
       <div class="container"><h2 id="%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3">基本的なアプリケーション</h2><pre><code>入力 -&gt; 計算 -&gt; 出力
</code></pre><pre><code class="prettyprint lang-clojure">(defn main []
  (-&gt;&gt; (read-line) (str &quot;hello&quot;) prn))
</code></pre></div>
      </div><div class="content" id="slide-2">
       <div class="container"><h2 id="%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E8%A6%81%E7%B4%A0">アプリケーションの要素</h2><pre><code class="prettyprint lang-clojure">(defn run [input]
  (str &quot;hello&quot; input))

(defn read []
  (read-line))

(defn write [result]
  (prn result))

(defn main []
  (-&gt;&gt; (read) run write))
</code></pre><p><em>副作用（外界との対話）は最小限に抑える</em>
</p></div>
      </div><div class="content" id="slide-3">
       <div class="container"><h2 id="%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%83%AB%E3%83%BC%E3%83%97">イベントループ</h2><pre><code>入力 -&gt; 計算 -&gt; 出力 -&gt; 入力 -&gt; 計算 -&gt; 出力 -&gt; ...
</code></pre><pre><code class="prettyprint lang-clojure">(defn main []
  (loop [input (read)]
    (when-not (= input &quot;quit&quot;)
      (-&gt; input run write)
      (recur (read)))))
</code></pre></div>
      </div><div class="content" id="slide-4">
       <div class="container"><h2 id="%E7%8A%B6%E6%85%8B">状態</h2><pre><code class="prettyprint lang-clojure">(defn run [input buffer]
  (let [result (str buffer input)]
    [result result]))

(def init &quot;&quot;)

(defn main []
  (loop [state init input (read)]
    (if-not (= input &quot;quit&quot;)
      (let [[result state'] (run input state)]
        (write result)
        (recur state' (read))))))
</code></pre></div>
      </div><div class="content" id="slide-5">
       <div class="container"><p>最低限の副作用
</p><ul><li>入力
</li><li>出力
</li><li>イベントループ
</li></ul></div>
      </div><div class="content" id="slide-6">
       <div class="container"><h2 id="%E8%A4%87%E6%95%B0%E3%81%AE%E7%8A%B6%E6%85%8B%E3%81%AB%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B">複数の状態に対応する</h2><p>アプリケーションのモデルを考える
</p><pre><code class="prettyprint lang-clojure">(defrecord Editor [buffer cursor])

(defn split [{:keys [cursor buffer]}]
  [(subs buffer 0 cursor)
   (subs buffer cursor (count buffer))])

(defn show [editor]
  (let [[left right] (split editor)]
    (str left &quot;\u20de&quot; right)))

(defn append [input {:keys [cursor] :as editor}]
  (let [[left right] (split editor)]
    (-&gt; editor
        (assoc :buffer (str left input right))
        (assoc :cursor (+ cursor (count input))))))
</code></pre></div>
      </div><div class="content" id="slide-7">
       <div class="container"><pre><code class="prettyprint lang-clojure">(defn run [input editor]
  (let [editor' (append input editor)
        result (show editor')]
    [result editor']))

(def init (Editor. &quot;&quot; 0))
</code></pre></div>
      </div><div class="content" id="slide-8">
       <div class="container"><pre><code class="prettyprint lang-clojure">(defn left [editor]
  (update-in editor [:cursor] dec))

(defn right [editor]
  (update-in editor [:cursor] inc))

(defn run [input editor]
  (let [editor'
        (case (first input)
          \&lt; (left editor)
          \&gt; (right editor)
          (append input editor))
        result (show editor')]
    [result editor']))
</code></pre></div>
      </div><div class="content" id="slide-9">
       <div class="container"><h2 id="%E8%A8%88%E7%AE%97%E3%81%AF%E4%BD%BF%E3%81%84%E5%9B%9E%E3%81%97%E3%81%8C%E5%8F%AF%E8%83%BD">計算は使い回しが可能</h2><pre><code class="prettyprint lang-clojure">(import [java.awt Frame FlowLayout Label TextField])
(import java.awt.event.ActionListener)

(defn main []
  (let [label (Label. &quot;hello&quot;)
        field (TextField. 10)
        state (atom init)
        action
        (reify ActionListener
          (actionPerformed [this e]
            (let [[result editor]
                  (run (.getText field) @state)]
              (.setText label result)
              (reset! state editor))))]
    (doto (Frame.)
      (.setLayout (FlowLayout.))
      (.add (doto field (.addActionListener action)))
      (.add label)
      (.setSize 100 100)
      (.setVisible true))))
</code></pre></div>
      </div><div class="content" id="slide-10">
       <div class="container"><p><em>AWT, Swingは旧時代のものなのでJavaFX使おう</em>
</p></div>
      </div><div class="content" id="slide-11">
       <div class="container"><p>おわり
</p></div>
      </div>
          </div>
        </div>
        
      </body>
    </html>